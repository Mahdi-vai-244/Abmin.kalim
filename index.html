<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel - Tournament Hub</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #e1e8ea; color: #4a5a75; }
    header { background: #4a5a75; color: white; padding: 12px; text-align: center; }
    main { padding: 15px; }
    h2 { margin-top: 0; }
    form { background: white; padding: 10px; border-radius: 8px; margin-bottom: 20px; }
    form input, form textarea { width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #8e9fc3; color: white; border: none; padding: 10px 15px; border-radius: 5px; }
    .list { display: grid; gap: 10px; }
    .card { background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <header>
    <h1>Admin Panel</h1>
  </header>
  <main>
    <h2>Create Tournament</h2>
    <form id="createForm">
      <input type="text" id="tName" placeholder="Tournament Name" required />
      <input type="text" id="tImage" placeholder="Image URL" />
      <input type="number" id="tFee" placeholder="Entry Fee" />
      <input type="number" id="tQuota" placeholder="Max Quota" />
      <textarea id="tNotice" placeholder="Notice"></textarea>
      <button type="submit">Add Tournament</button>
    </form>

    <h2>All Tournaments</h2>
    <div class="list" id="tournamentList"></div>
  </main>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } 
      from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBmnZOuF_pnV7OMXpbVvtf3CusGzWyBhgo",
      authDomain: "ff-2-41e00.firebaseapp.com",
      projectId: "ff-2-41e00",
      storageBucket: "ff-2-41e00.firebasestorage.app",
      messagingSenderId: "974994116979",
      appId: "1:974994116979:web:7a39dfc8e7f8d2c9a7b506"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById("createForm");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      await addDoc(collection(db, "tournaments"), {
        name: document.getElementById("tName").value,
        image: document.getElementById("tImage").value,
        entryFee: document.getElementById("tFee").value,
        quotaMax: document.getElementById("tQuota").value,
        quotaCurrent: 0,
        notice: document.getElementById("tNotice").value,
        status: "upcoming"
      });
      alert("Tournament Added!");
      loadTournaments();
      form.reset();
    });

    async function loadTournaments() {
      const q = await getDocs(collection(db, "tournaments"));
      const list = document.getElementById("tournamentList");
      list.innerHTML = "";
      q.forEach(doc => {
        const t = doc.data();
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<h3>${t.name}</h3>
          <p>Entry Fee: ${t.entryFee}</p>
          <p>Quota: ${t.quotaCurrent}/${t.quotaMax}</p>
          <p>Status: ${t.status}</p>`;
        list.appendChild(div);
      });
    }
    loadTournaments();
  </script>
</body>
</html>
